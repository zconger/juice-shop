app:
  applicationId: ${JS_APP_ID:48232faa-02d5-455f-b48b-a668b95c4b6d}
  env: Cypress
  host: http://localhost:3000
  sessionTokens:
    - token
#  excludePaths:
#    - ".*socket\\.io.*"
#    - ".*\\.png"
#    - ".*\\.jpeg"
#    - ".*\\.jpg"
#    - ".*\\.woff"
#    - ".*\\.woff2"
#    - ".*\\.ttf"
#    - ".*\\.ico"
  authentication:
    usernamePassword:
      type: JSON
      loginPagePath: /login
      loginPath: /rest/user/login
      usernameField: email
      passwordField: password
      scanUsername: "test@test.com"
      scanPassword: "testtest"
    tokenExtraction:
      type: TOKEN_PATH
      value: "authentication.token"
    tokenAuthorization:
      type: HEADER
      value: Authorization
      tokenType: Bearer
#    external:
#      type: COOKIE
#      value: "token=${JS_AUTH_TOKEN}"
#    cookieAuthorization:
#      cookieNames:
#        - token
    testPath:
      type: BODY
      path: /rest/user/whoami
      success: ".*email.*"
      requestMethod: GET
    loggedInIndicator: ".*"
    loggedOutIndicator: "^$"

hawk:
  spider:
    ajax: false
    base: false
    custom:
#      command: "false"
      command: 'bash'
      arguments:
        - "-c"
        - "npx cypress run --headless"
#        - "npx cypress run || true"
      logOutputToForeground: true
      environment:
        NO_PROXY: "<-loopback>"

#hawkAddOn:
#  replacer:
#    rules:
#      - matchString: Authorization
#        replaceOnly: false
#        replacement: "Bearer ${JS_AUTH_TOKEN}"
